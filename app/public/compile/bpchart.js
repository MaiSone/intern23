var _slicedToArray=function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,a){var t=[],r=!0,l=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(t.push(o.value),!a||t.length!==a);r=!0);}catch(e){l=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(l)throw n}}return t}(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")},colorCode={default:["#52A69F","#596DB8","#EDB444","#D4628B","#99AD4A","#7E522E","#57A9D7","#A15CB9","#E0792E","#A57667"],notSelected:["rgba(82,166,159,0.25)","rgb(89,109,184,0.25)","rgb(237,180,68,0.25)","rgb(212,98,139,0.25)","rgb(153,173,74,0.25)","rgb(126,82,46,0.25)","rgb(87,169,215,0.25)","rgb(161,92,185,0.25)","rgb(224,121,46,0.25)","rgb(165,118,103,0.25)"]},type={line:"line",area:"line",stackedArea:"line",bar:"bar",horizontalBar:"horizontalBar",stackedBar:"bar",stackedHorizontalBar:"horizontalBar",rankingBar:"horizontalBar",scatter:"scatter",bubble:"bubble",pie:"pie"},xAxesStacked={line:!1,area:!1,stackedArea:!1,bar:!1,horizontalBar:!1,stackedBar:!0,stackedHorizontalBar:!0,rankingBar:!1,scatter:!1,bubble:!1,pie:!1},yAxesStacked={line:!1,area:!1,stackedArea:!0,bar:!1,horizontalBar:!1,stackedBar:!0,stackedHorizontalBar:!0,rankingBar:!1,scatter:!1,bubble:!1,pie:!1},fill={line:!1,area:!0,stackedArea:!0,bar:!1,horizontalBar:!1,stackedBar:!1,stackedHorizontalBar:!1,rankingBar:!1,scatter:!0,bubble:!0,pie:!1},xAutoSkip={line:!0,area:!0,stackedArea:!0,bar:!0,horizontalBar:!0,stackedBar:!0,stackedHorizontalBar:!0,rankingBar:!0,scatter:!1,bubble:!1,pie:!1},yAutoSkip={line:!0,area:!0,stackedArea:!0,bar:!0,horizontalBar:!1,stackedBar:!0,stackedHorizontalBar:!1,rankingBar:!1,scatter:!1,bubble:!1,pie:!1},pointRadius={line:0,area:0,stackedArea:0,bar:0,horizontalBar:0,stackedBar:0,stackedHorizontalBar:0,rankingBar:0,scatter:3,bubble:3,pie:0},datalabels={line:!1,area:!1,stackedArea:!1,bar:!1,horizontalBar:!1,stackedBar:!1,stackedHorizontalBar:!1,rankingBar:!0,scatter:!0,bubble:!0,pie:!1},dataObject={line:{labels:null,datasets:null},area:{labels:null,datasets:null},stackedArea:{labels:null,datasets:null},bar:{labels:null,datasets:null},horizontalBar:{labels:null,datasets:null},stackedBar:{labels:null,datasets:null},stackedHorizontalBar:{labels:null,datasets:null},rankingBar:{labels:null,datasets:null},scatter:{datasets:null},bubble:{datasets:null},pie:{backgroundColor:"rgba(0, 0, 0, 0.1)",borderAlign:"center",borderColor:"#fff",borderWidth:2,data:[],hoverBackgroundColor:void 0,hoverBorderColor:void 0,hoverBorderWidth:void 0,weight:1}},axes={line:!0,area:!0,stackedArea:!0,bar:!0,horizontalBar:!0,stackedBar:!0,stackedHorizontalBar:!0,rankingBar:!0,scatter:!0,bubble:!0,pie:!1},tooltipAlign={line:"left",area:"left",stackedArea:"left",bar:"left",horizontalBar:"left",stackedBar:"left",stackedHorizontalBar:"left",rankingBar:"left",scatter:"left",bubble:"left",pie:"center"},tooltipsPosition={line:"average",area:"average",stackedArea:"average",bar:"average",horizontalBar:"average",stackedBar:"average",stackedHorizontalBar:"average",rankingBar:"average",scatter:"average",bubble:"average",pie:"pie"};function generateDataset(e,a,t,r){var l=[];if("scatter"===t)!function(){var n=[];for(o=1;o<e.length;o++)n.push(e[o].legend);var s=Array.from(new Set(n));for(i=0;i<s.length;i++){var d=[],c=e.filter((function(e){return e.legend===s[i]}));for(o=0;o<c.length;o++)"scatter"===t?d.push({x:Number(c[o].x),y:Number(c[o].y),label:c[o].label}):"bubble"===t&&d.push({x:Number(c[o].x),y:Number(c[o].y),r:Number(c[o].r),label:c[o].label});var b=r[i]?colorCode[a][i]:colorCode.notSelected[i],u=r[i]?colorCode[a][i]:colorCode.notSelected[i],g=fill[t],p={label:s[i],backgroundColor:b,borderColor:u,fill:g,data:d};l.push(p)}}();else if("bubble"===t){for(var n=[],o=1;o<11;o++)n.push(e[o].label);for(var i=0;i<n.length;i++){var s=[];s.push({x:Number(e[i+1].x),y:Number(e[i+1].y),r:Number(e[i+1].r),label:e[i+1].label});var d=r[i]?colorCode[a][i]:colorCode.notSelected[i],c=r[i]?colorCode[a][i]:colorCode.notSelected[i],b=fill[t],u={label:n[i],backgroundColor:d,borderColor:c,fill:b,data:s};l.push(u)}}else if("rankingBar"===t){var g=[];for(o=1;o<e.length;o++)g.push(e[o].value),g.map(Number);var p=[];for(o=1;o<e.length;o++)p.push(e[o].label);var f={label:p,backgroundColor:r[0]?colorCode[a][0]:colorCode.notSelected[0],borderColor:r[0]?colorCode[a][0]:colorCode.notSelected[0],fill:fill[t],data:g};l.push(f)}else if("pie"===t){var h=[],y=[],v=[];for(o=0;o<e.length-1;o++)h.push(e[o+1].data0),h.map(Number),y.push(r[o]?colorCode[a][o]:colorCode.notSelected[o]),v.push(r[o]?colorCode[a][o]:colorCode.notSelected[o]);dataObject[t].backgroundColor=y,dataObject[t].borderColor=v,dataObject[t].data=h,l.push(dataObject[t])}else for(i=0;i<Object.keys(e[0]).length-1;i++){var k=[];for(o=1;o<e.length;o++)k.push(e[o]["data"+i]),k.map(Number);var m=r[i]?colorCode[a][i]:colorCode.notSelected[i],x=r[i]?colorCode[a][i]:colorCode.notSelected[i],A=fill[t],B={label:Object.values(e[0])[i+1],backgroundColor:m,borderColor:x,fill:A,data:k,order:i};l.push(B)}return l}function generateLabel(e){var a=[];if("rankingBar"===type)for(var t=1;t<e.length;t++)a.push(e[t].rank);else for(t=1;t<e.length;t++)a.push(e[t].label);return a}function generateData(e,a,t){return{labels:a,datasets:t}}function setLegend(e,a){if("scatter"===a||"bubble"===a||"pie"===a){for(var t=[],r=1;r<e.length;r++)"pie"===a||"bubble"===a?t.push(e[r].label):t.push(e[r].legend);var l=Array.from(new Set(t));setLegendLength(l.length),setLegendLabel(l)}else"rankingBar"===a?(setLegendLength(1),setLegendLabel(legendLabel)):(setLegendLength(Object.keys(e[0]).length-1),setLegendLabel(Object.values(e[0]).slice(1)))}function LineGraph(e){var a=React.useRef(null),t=React.useState(0),r=_slicedToArray(t,2),l=(r[0],r[1]),n=React.useState(new Array(10).fill(!0)),o=_slicedToArray(n,2),i=o[0],s=o[1],d=React.useState(new Array(10).fill(!1)),c=_slicedToArray(d,2),b=c[0],u=c[1],g=React.useState(3),p=_slicedToArray(g,2),f=p[0],h=p[1],y=React.useState(new Array(10).fill("a")),v=_slicedToArray(y,2),k=v[0],m=v[1];React.useEffect((function(){A()})),React.useEffect((function(){x(e.dataForChart,e.type)}),[]);var x=function(e,a){if("scatter"===a||"bubble"===a||"pie"===a){for(var t=[],r=1;r<e.length;r++)"pie"===a||"bubble"===a?r<11&&t.push(e[r].label):r<11&&t.push(e[r].legend);var l=Array.from(new Set(t));h(l.length),m(l)}else"rankingBar"===a?(h(1),m(k)):(h(Object.keys(e[0]).length-1),m(Object.values(e[0]).slice(1)))},A=function(){var t=a.current.getContext("2d"),r=generateLabel(e.dataForChart),l=generateDataset(e.dataForChart,e.colorTheme,e.type,i),n=generateData(e.type,r,l),o=e.type,s=type[e.type],d=xAxesStacked[e.type],c=yAxesStacked[e.type],b=xAutoSkip[e.type],u=yAutoSkip[e.type],g=pointRadius[e.type],p=datalabels[e.type],f=axes[e.type],h=(tooltipAlign[e.type],tooltipsPosition[e.type]);Chart.defaults.global.defaultFontColor="#000000",Chart.defaults.global.defaultFontFamily="'Heebo', sans-serif",Chart.Tooltip.positioners.pie=function(e,a){return{x:e[0]._chart.width/4,y:e[0]._chart.height/4}},t.fillStyle="#FAFAF9";var y=new Chart(t,{type:s,data:n,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1,legend:{display:!1},tooltips:{enabled:!1,mode:"nearest",position:h,bodyAlign:"center",footerAlign:"center",custom:function(a){var t=document.getElementById("chartjs-tooltip");if(t||((t=document.createElement("div")).id="chartjs-tooltip",t.innerHTML="<table></table>",document.body.appendChild(t)),t.classList.remove("above","below","no-transform"),a.yAlign?t.classList.add(a.yAlign):t.classList.add("no-transform"),void 0!==a.body)if(void 0!==(i=a.body[0].lines[0].split(":"))[1])var r=i[1].replace(/[\[\]']+/g,""),l=i[1].replace(/[\(\)']+/g,"").replace(/\s/g,"").split(","),n=r.split(",");else{var i;l=(i=a.body[0].lines[0]).replace(/[\(\)']+/g,"").replace(/\s/g,"").split(",")}if(a.body){if("scatter"===o||"bubble"===o)var s=Array(this._data.datasets[a.dataPoints[0].datasetIndex].data[a.dataPoints[0].index].label);else s=a.title;var d=a.body.map((function(e){return e.lines})),c="<thead>";s.forEach((function(e){c+="<tr><th>"+e+"</th></tr>"})),c+="</thead><tbody>",d.forEach((function(a,t){var r='<span style="background:#fff; border-color:#fff; border-width: 2px"></span>';"scatter"===o?null!==e.scaleLabelLabelStringxAxes||null!==e.scaleLabelLabelStringyAxes?c+="<tr><td>"+e.scaleLabelLabelStringxAxes+" : "+l[0]+" "+e.scaleLabelLabelStringyAxes+" : "+l[1]+"</td></tr>":c+="":"bubble"===o?null!==e.scaleLabelLabelStringxAxes||null!==e.scaleLabelLabelStringyAxes?c+="<tr><td>"+e.scaleLabelLabelStringxAxes+" : "+l[0]+" "+e.scaleLabelLabelStringyAxes+" : "+l[1]+"規模"+l[2]+"</td></tr>":c+="":c+="rankingBar"===o?'<tr><td style="font-size: 12px;">'+r+i[0][t]+" : "+Number(n[0])+"</td></tr>":"<tr><td>"+r+a+"</td></tr>"})),c+="</tbody>",t.querySelector("table").innerHTML=c}var b=this._chart.canvas.getBoundingClientRect();t.style.backgroundColor="#FFFFFF",t.style.position="absolute",t.style.left=b.left+window.pageXOffset+a.caretX+"px",t.style.top=b.top+window.pageYOffset+a.caretY+"px",t.style.fontFamily=a._bodyFontFamily,t.style.fontSize=a.bodyFontSize+"px",t.style.fontStyle=a._bodyFontStyle,t.style.pointerEvents="none",t.style.borderRadius="5px",t.style.width="initial",t.style.height="initial",t.style.textAlign="initial",t.style.lineHeight="initial",t.style.padding=a.yPadding+"px "+a.xPadding+"px",t.style.boxShadow="0 1px 10px 1px rgba(128,128,128,0.6)"}},elements:{point:{radius:g},line:{tension:0}},scales:{xAxes:[{display:f,stacked:d,gridLines:{drawTicks:!1,zeroLineColor:"#000000"},ticks:{callback:function(e){return"number"==typeof e?e.toLocaleString():e},autoSkip:b,autoSkipPadding:50,maxRotation:0,minRotation:0,padding:10}}],yAxes:[{display:f,stacked:c,gridLines:{drawTicks:!1,zeroLineColor:"#000000"},ticks:{callback:function(e){return"number"==typeof e?e.toLocaleString():e},autoSkip:u,autoSkipPadding:50,maxRotation:0,minRotation:0,padding:10,min:0}}]},plugins:{datalabels:{display:p,anchor:"end",align:"end",textAlign:"center",padding:{bottom:1},formatter:function(e,a){return"scatter"===o||"bubble"===o?e.label:"rankingBar"===o?a.chart.data.datasets[0].label[a.dataIndex]:void 0}}}}});if("horizontalBar"===s&&void 0!==y.chart.scales["y-axis-0"].longestLabelWidth&&void 0!==y.chartArea.left){var v=2*(y.chart.scales["y-axis-0"].longestLabelWidth-y.scales["y-axis-0"].width+10);v>0&&(y.options.layout.padding.left=v,y.update())}return y};return React.createElement("div",{style:{fontFamily:"Noto Sans JP"}},React.createElement("div",{style:{marginBottom:4,fontSize:24},id:"title"},e.titleText),React.createElement("div",null,React.createElement("div",{style:{marginBottom:8,fontSize:16},id:"legendTitle"},e.legendTitle),function(){var a=Array();if(!(f>1))return!1;for(var t=function(t){var r=i[t]?colorCode[e.colorTheme][t]:colorCode.notSelected[t];a.push(React.createElement("div",{style:{display:"flex",marginRight:12},key:t,className:"legend_legend-item__hVZal css-1wxaqej"},React.createElement("div",{style:{background:r,width:15,height:15,margin:3},onClick:function(){return function(e){var a=b;a[e]=!b[e],l((function(){for(var e=0,t=0;t<f;t++)!0===a[t]&&e++;return 0===e||e===f?(s(Array(f).fill(!0)),u(Array(f).fill(!1))):s(a),e}))}(t)},className:"legend_legend-rect__3_0lc"}),React.createElement("div",null,k[t])))},r=0;r<f;r++)t(r);return React.createElement("div",{style:{display:"flex",flexWrap:"wrap"},id:"legend",className:"legend_legend__24eBL css-1d3bbye"},a)}()),React.createElement("div",{style:{marginTop:12,marginBottom:10,fontSize:12},id:"yAxesLabel",className:"chart_axis__B-zYA chart_y__1huGV"},e.scaleLabelLabelStringyAxes),React.createElement("canvas",{ref:a,id:"bpchart"}),React.createElement("div",null,React.createElement("p",{style:{marginBottom:10,marginLeft:10,fontSize:12,textAlign:"right"},id:"xAxesLabel",className:"chart_axis__B-zYA chart_x__2AUNC"},e.scaleLabelLabelStringxAxes)),function(){if(void 0!==e.captionText)return React.createElement("div",{style:{marginBottom:4,fontSize:14},id:"caption"},e.captionText)}())}var bpChartList=document.querySelectorAll(".bpChart"),data=[];bpChartList.forEach((function(e){var a=e.dataset.bpcmsSource;fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(a){data.push(a),ReactDOM.createRoot(e).render(React.createElement(LineGraph,{dataForChart:a.data,type:a.globalsetting[0].type,colorTheme:a.globalsetting[0].colorTheme,responsive:a.globalsetting[0].responsive,legendTitle:a.globalsetting[0].legendTitle,titleText:a.globalsetting[0].titleText,captionText:a.globalsetting[0].captionText,scaleLabelLabelStringxAxes:a.globalsetting[0].scaleLabelLabelStringxAxes,scaleLabelLabelStringyAxes:a.globalsetting[0].scaleLabelLabelStringyAxes}))}))}));